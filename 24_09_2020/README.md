Второе занятие. Библиотеки в python
===


Множество кода уже написано ранее. Мы можем использовать библиотеки для ускорения разработки. В этом занятии познакомимся с написанием таких модулей.


В питоне доступно большое кол-во встроеных библиотек.

Библиотеку можно подключить командой:
```python
import <lib_name>
```

Например библиотека ```os```.  Она предоставляет большое множество функций для работы с операционной системой.

Данный пример выведет текущую дирректорию:
```python
import os
print(os.getcwd()) 
```

Данный пример выведет текущее время в формате UNIX (время в секундах с начала эпохи 1 января 1970)
```python
import time
print(time.time())
```

Получение псевдослучайных чисел:
```python
import random
print(random.random()) # Случайное дробное число в диапазоне от 0 до 1
print(random.randint(0, 10)) # Случайное целое число в диапазоне от 0 до 10 
```


Посмотреть доступные функции в библиотеке можно в описании библиотеки или следующим образом:
```python
import <lib>
print(dir(random))
```


Пример разработки библиотеки можно посмотреть в папке my_lib Файл main.py содержит примеры работы с такой бибилиотекой.

Однако многие интересные библиотеки созданы сообществом и не входят в стандартные библиотеки python-а

Например библиотека requests позволяет отправлять запросы к сайтам.

Если мы попробуем импортировать эту библитеку, то получим ошибку:
```
>>> import requests
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ModuleNotFoundError: No module named 'requests'
```

Давайте ее установим:
```
pip install requests

или
python -m pip install requests
```

После завершения, попробуем снова:
```
import requests
resp = requests.get('http://ident.me')
print(resp.text) # Вывод 45.52.204.84 (У вас будет по другому)
```
Здесь мы отправляем запрос на сайт http://ident.me/

Этот сайт отправляет в ответ всего лишь ip адрес зашедшего на страницу.

Вы можете убедиться в этом сами, открыв ссылку в браузере

Однако если мы попытаемся отправить запрос в https://google.com/ , то увидим что возвращается "каша"

В дальнейших занятиях в модуле "Реальные приложения" мы с вами разберем как раскладывать такую кашу в удобноперевариваемый формат.



Давайте познакомимся с понятием API

API (Application programming interface)  описание способов, которыми одна компьютерная программа может взаимодействовать с другой программой. Обычно входит в описание какого-либо интернет-протокола, программного каркаса или стандарта вызовов функций операционной системы.

Многие API в качестве ответа предоставляют json

JSON (JavaScript Object Notation) – это текстовый формат представления данных. Предназначен JSON, также как и некоторые другие форматы такие как XML и YAML, для обмена данными.


Пример
```
{
    "status": "OK",
    "status_code": 100,
    "sms": {
        "7884515455": {
            "status": "OK",
            "status_code": 100,
            "sms_id": "000000-10000000"
        },
    } ,
    "balance": 4122.56
}
```

Мы можем работать с этим объектом следующим образом:
```
import json
import requests

responce = requests.get(url).text
balance = json.loads(responce)['balance'] # balance будет равно 4122.56
status = json.loads(responce)['sms']['7884515455']['status'] # status == "OK"
```